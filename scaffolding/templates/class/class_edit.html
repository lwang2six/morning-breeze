{% load scaffold_tags %}
<script type="text/javascript" src="{{ MEDIA_URL }}js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="{{ MEDIA_URL }}js/scaffold.js"></script>
<form method="post" action="">{% csrf_token %}
<table id='b'>
{% for field in form %}
    <tr><th>{{field.label_tag}}</th><td>{{field}}</td></tr>
{% endfor %} 
{% for hidden in form.hidden_fields %}{{ hidden }}{% endfor %}

{{formset.management_form}}
{% for f in formset.forms %}
<div class="{{f.prefix}}_container">
    <tr class="{{f.prefix}}_name_row"><th>{{f.name.label_tag}}</th><td>{{f.name}}</td></tr>
    <tr class="{{f.prefix}}_type_row"><th>{{f.type.label_tag}}</th><td>{{f.type}}</td></tr>
    {% if f.option_fk_name %}
      <tr class="{{f.prefix}}_option_fk_name_row"><th>{{f.option_fk_name.label_tag}}</th><td>{{f.option_fk_name}}</td></tr>
    {% endif %}
    <tr class="{{f.prefix}}_options_row"><th>{{f.options.label_tag}}</th><td><div class="id_{{f.prefix}}_choice_list"> {% doSome f f.prefix %}</div></td></tr>
    <tr>
    <script>
        $("#id_{{f.prefix}}-type").change(function(){$("#id_{{f.prefix}}-type option:selected").each(function(){yay("{{f.prefix}}", $(this).text());});});
    </script>
  {% for hidden in f.hidden_fields %}{{ hidden }}{% endfor %}</tr>

{% endfor %}
</table>

<input type="button" id="one_more"  name="add_another" value="Add Another">
<input type="submit" value="Submit" name="save" class="button" />
{% if clas.get_next_class %}
    <input type="submit" value="Continue" name="continue" class="button" />
{% endif %}
</form>
{{formset.total_form_count}}
<script>
  $(document).ready(function(){

      $('#one_more').click(function(){
          var v = +$('#id_field_set-TOTAL_FORMS').val();
          var extras = [];
          extras.push('<tr class="field_set-',v,'-name_row"><th><label for="id_field_set-',v,'-name">Name:</label></th><td><input id="id_field_set-',v,'-name" type="text" maxlength="30" name="field_set-',v,'-name"></td></tr><tr class="field_set-',v,'-type_row"><th><label for="id_field_set-',v,'-type">Type:</label></th><td><select id="id_field_set-',v,'-type" name="field_set-',v,'-type"><option selected="selected" value="">---------</option><option value="1">BooleanField</option><option value="2">CharField</option><option value="3">DateTimeField</option><option value="4">FileField</option><option value="5">ForeignKey</option><option value="6">IntegerField</option><option value="7">ImageField</option><option value="8">PositiveIntegerField</option><option value="9">TextField</option></select</td></tr><tr class="field_set-',v,'-options_row"><th><label for="id_field_set-',v,'-options_0">Options:</label></th><td><div class="id_field_set-',v,'_choice_list"><ul><li><label for="id_field_set-',v,'-options_0"><input type="checkbox" name="field_set-',v,'-options" value="blank" id="id_field_set-',v,'-options_0" /> blank</label></li><li><label for="id_field_set-',v,'-options_1"><input type="checkbox" name="field_set-',v,'-options" value="choices" id="id_field_set-',v,'-options_1" /> choices</label></li><li><label for="id_field_set-',v,'-options_2"><input type="checkbox" name="field_set-',v,'-options" value="default" id="id_field_set-',v,'-options_2" /> default</label></li><li><label for="id_field_set-',v,'-options_3"><input type="checkbox" name="field_set-',v,'-options" value="editable" id="id_field_set-',v,'-options_3" /> editable</label></li><li><label for="id_field_set-',v,'-options_4"><input type="checkbox" name="field_set-',v,'-options" value="help_text" id="id_field_set-',v,'-options_4" /> help text</label></li><li><label for="id_field_set-',v,'-options_5"><input type="checkbox" name="field_set-',v,'-options" value="max_length" id="id_field_set-',v,'-options_5" /> max length</label></li><li><label for="id_field_set-',v,'-options_6"><input type="checkbox" name="field_set-',v,'-options" value="null" id="id_field_set-',v,'-options_6" /> null</label></li><li><label for="id_field_set-',v,'-options_7"><input type="checkbox" name="field_set-',v,'-options" value="related_name" id="id_field_set-',v,'-options_7" /> related name</label></li><li><label for="id_field_set-',v,'-options_8"><input type="checkbox" name="field_set-',v,'-options" value="unique" id="id_field_set-',v,'-options_8" /> unique</label></li><li><label for="id_field_set-',v,'-options_9"><input type="checkbox" name="field_set-',v,'-options" value="verbose_name" id="id_field_set-',v,'-options_9" /> verbose name</label></li></ul></div></td></tr><script>$("#id_field_set-',v,'-type").change(function(){$("#id_field_set-',v,'-type option:selected").each(function(){yay("field_set-',v,'", $(this).text());});});<\/script><input type="hidden" name="field_set-',v,'-id" id="id_field_set-',v,'-id" /><input type="hidden" name="field_set-',v,'-parent_class" value={{clas.id}} id="id_field_set-',v,'-parent_class" />')
          $('#id_field_set-TOTAL_FORMS').val(+v+1);
          $('tbody tr:last').after(extras.join(''));
      });
    });
</script>
